{% extends "base.html" %}

{% block title %}Login - Kerala BLMS{% endblock %}

{% block content %}
<!-- 
  Kerala BLMS Animated Login Form
  Features: Two animated friend characters that respond to user input
  - Characters sneak in on page load with opacity and translation
  - Eyes follow and look at username field when focused
  - Eyes close when password field is focused
  - Smooth transitions and animations throughout
-->

<style>
  /* Custom keyframe animations for sneaking effect */
  @keyframes sneak-in-left {
    0% {
      opacity: 0;
      transform: translateX(-100px) translateY(-50px) scale(0.8);
    }
    60% {
      transform: translateX(10px) translateY(0) scale(1.05);
    }
    100% {
      opacity: 1;
      transform: translateX(0) translateY(0) scale(1);
    }
  }

  @keyframes sneak-in-right {
    0% {
      opacity: 0;
      transform: translateX(100px) translateY(-50px) scale(0.8);
    }
    60% {
      transform: translateX(-10px) translateY(0) scale(1.05);
    }
    100% {
      opacity: 1;
      transform: translateX(0) translateY(0) scale(1);
    }
  }

  @keyframes blink {
    0%, 90%, 100% {
      height: 0%;
    }
    95% {
      height: 100%;
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes wiggle {
    0%, 100% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(-5deg);
    }
    75% {
      transform: rotate(5deg);
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    }
    50% {
      box-shadow: 0 0 40px rgba(59, 130, 246, 0.8);
    }
  }

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  /* Friend character base styles */
  .friend-character {
    position: relative;
    width: 120px;
    height: 120px;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .friend-character:hover {
    transform: scale(1.1) rotate(5deg);
  }

  /* Character face */
  .character-face {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  /* Character hair */
  .character-hair {
    position: absolute;
    top: -10px;
    width: 100%;
    height: 50%;
    border-radius: 50% 50% 0 0;
    transition: all 0.3s ease;
  }

  .hair-strand {
    position: absolute;
    width: 20px;
    height: 30px;
    border-radius: 50%;
    transition: all 0.3s ease;
  }

  /* Eyes container */
  .eyes-container {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 25px;
    transition: all 0.4s ease;
  }

  /* Individual eye */
  .eye {
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  /* Pupil */
  .pupil {
    position: absolute;
    width: 12px;
    height: 12px;
    background: #1a1a1a;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .pupil::after {
    content: '';
    position: absolute;
    width: 4px;
    height: 4px;
    background: white;
    border-radius: 50%;
    top: 3px;
    left: 3px;
  }

  /* Eyelid for closing effect */
  .eyelid {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 0%;
    background: inherit;
    transition: height 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 10;
  }

  .eye.closed .eyelid {
    height: 100%;
  }

  /* Character mouth */
  .character-mouth {
    position: absolute;
    bottom: 30%;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 15px;
    border-bottom: 3px solid #333;
    border-radius: 0 0 30px 30px;
    transition: all 0.3s ease;
  }

  .character-mouth.smile {
    width: 40px;
    height: 20px;
  }

  /* Character blush */
  .character-blush {
    position: absolute;
    width: 20px;
    height: 15px;
    border-radius: 50%;
    top: 55%;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .character-blush.left {
    left: 10%;
  }

  .character-blush.right {
    right: 10%;
  }

  .character-blush.show {
    opacity: 0.6;
  }

  /* Character body */
  .character-body {
    position: absolute;
    bottom: -40px;
    left: 50%;
    transform: translateX(-50%);
    width: 70px;
    height: 50px;
    border-radius: 20px 20px 40px 40px;
    transition: all 0.3s ease;
  }

  /* Character arms */
  .character-arm {
    position: absolute;
    width: 15px;
    height: 40px;
    border-radius: 20px;
    bottom: -35px;
    transition: all 0.3s ease;
  }

  .character-arm.left {
    left: -10px;
    transform: rotate(-20deg);
  }

  .character-arm.right {
    right: -10px;
    transform: rotate(20deg);
  }

  /* Character hands */
  .character-hand {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
  }

  /* Animation classes */
  .sneak-left {
    animation: sneak-in-left 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .sneak-right {
    animation: sneak-in-right 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  .wiggle-animation {
    animation: wiggle 2s ease-in-out infinite;
  }

  .blink-animation .eyelid {
    animation: blink 4s infinite;
  }

  /* Card entrance animation */
  .card-entrance {
    animation: fadeInScale 0.8s ease-out forwards;
    animation-delay: 0.5s;
    opacity: 0;
  }

  @keyframes fadeInScale {
    0% {
      opacity: 0;
      transform: scale(0.9) translateY(20px);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  /* Decorative background elements */
  .background-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.3;
    animation: pulse-glow 4s ease-in-out infinite;
  }

  .orb-1 {
    width: 300px;
    height: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    top: -150px;
    left: -150px;
  }

  .orb-2 {
    width: 250px;
    height: 250px;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    bottom: -125px;
    right: -125px;
    animation-delay: 2s;
  }

  .orb-3 {
    width: 200px;
    height: 200px;
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    top: 50%;
    left: -100px;
    animation-delay: 1s;
  }

  /* Input focus effects */
  .input-focused {
    border-color: #60a5fa !important;
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.3) !important;
  }

  /* Shimmer effect for login button */
  .shimmer-button {
    background: linear-gradient(
      90deg,
      #ffffff 0%,
      #f3f4f6 50%,
      #ffffff 100%
    );
    background-size: 200% 100%;
    animation: shimmer 3s linear infinite;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .friend-character {
      width: 80px;
      height: 80px;
    }

    .eyes-container {
      gap: 15px;
    }

    .eye {
      width: 18px;
      height: 18px;
    }

    .pupil {
      width: 9px;
      height: 9px;
    }
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #1e293b;
  }

  ::-webkit-scrollbar-thumb {
    background: #475569;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #64748b;
  }
</style>

<section class="section-padding bg-slate-900 flex justify-center items-center min-h-screen relative overflow-hidden">
  <!-- Background decorative orbs -->
  <div class="background-orb orb-1"></div>
  <div class="background-orb orb-2"></div>
  <div class="background-orb orb-3"></div>

  <!-- Animated Friend Characters Container -->
  <div id="friends-container" class="absolute top-20 left-1/2 transform -translate-x-1/2 flex gap-32 z-20">
    
    <!-- Friend 1 - Left Character -->
    <div id="friend1" class="friend-character sneak-left float-animation" style="animation-delay: 0.2s;">
      <div class="character-face bg-gradient-to-br from-yellow-300 to-yellow-500">
        <!-- Hair -->
        <div class="character-hair bg-gradient-to-b from-amber-800 to-amber-600">
          <div class="hair-strand bg-amber-700" style="left: 20%; top: -5px;"></div>
          <div class="hair-strand bg-amber-700" style="left: 50%; top: -8px; transform: translateX(-50%);"></div>
          <div class="hair-strand bg-amber-700" style="right: 20%; top: -5px;"></div>
        </div>

        <!-- Eyes -->
        <div class="eyes-container" id="friend1-eyes">
          <div class="eye blink-animation">
            <div class="pupil" id="friend1-pupil-left"></div>
            <div class="eyelid bg-yellow-400"></div>
          </div>
          <div class="eye blink-animation">
            <div class="pupil" id="friend1-pupil-right"></div>
            <div class="eyelid bg-yellow-400"></div>
          </div>
        </div>

        <!-- Mouth -->
        <div class="character-mouth"></div>

        <!-- Blush -->
        <div class="character-blush left bg-pink-300"></div>
        <div class="character-blush right bg-pink-300"></div>

        <!-- Nose -->
        <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top: 52%; left: 50%; transform: translate(-50%, -50%);"></div>
      </div>

      <!-- Body -->
      <div class="character-body bg-gradient-to-b from-blue-400 to-blue-600">
        <div class="character-arm left bg-blue-500">
          <div class="character-hand bg-yellow-400"></div>
        </div>
        <div class="character-arm right bg-blue-500">
          <div class="character-hand bg-yellow-400"></div>
        </div>
      </div>

      <!-- Shadow -->
      <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-20 h-4 bg-black opacity-20 rounded-full blur-sm"></div>
    </div>

    <!-- Friend 2 - Right Character -->
    <div id="friend2" class="friend-character sneak-right float-animation" style="animation-delay: 0.4s;">
      <div class="character-face bg-gradient-to-br from-pink-300 to-pink-500">
        <!-- Hair with pigtails -->
        <div class="character-hair bg-gradient-to-b from-purple-800 to-purple-600">
          <div class="hair-strand bg-purple-700" style="left: 15%; top: -5px;"></div>
          <div class="hair-strand bg-purple-700" style="left: 50%; top: -8px; transform: translateX(-50%);"></div>
          <div class="hair-strand bg-purple-700" style="right: 15%; top: -5px;"></div>
          
          <!-- Pigtails -->
          <div class="absolute w-8 h-8 bg-purple-600 rounded-full" style="left: -15px; top: 30%; box-shadow: -3px 5px 0 purple-700;"></div>
          <div class="absolute w-8 h-8 bg-purple-600 rounded-full" style="right: -15px; top: 30%; box-shadow: 3px 5px 0 purple-700;"></div>
        </div>

        <!-- Eyes -->
        <div class="eyes-container" id="friend2-eyes">
          <div class="eye blink-animation" style="animation-delay: 0.5s;">
            <div class="pupil" id="friend2-pupil-left"></div>
            <div class="eyelid bg-pink-400"></div>
          </div>
          <div class="eye blink-animation" style="animation-delay: 0.5s;">
            <div class="pupil" id="friend2-pupil-right"></div>
            <div class="eyelid bg-pink-400"></div>
          </div>
        </div>

        <!-- Mouth -->
        <div class="character-mouth"></div>

        <!-- Blush -->
        <div class="character-blush left bg-red-300"></div>
        <div class="character-blush right bg-red-300"></div>

        <!-- Nose -->
        <div class="absolute w-3 h-3 bg-pink-600 rounded-full" style="top: 52%; left: 50%; transform: translate(-50%, -50%);"></div>
      </div>

      <!-- Body -->
      <div class="character-body bg-gradient-to-b from-purple-400 to-purple-600">
        <div class="character-arm left bg-purple-500">
          <div class="character-hand bg-pink-400"></div>
        </div>
        <div class="character-arm right bg-purple-500">
          <div class="character-hand bg-pink-400"></div>
        </div>
      </div>

      <!-- Shadow -->
      <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-20 h-4 bg-black opacity-20 rounded-full blur-sm"></div>
    </div>
  </div>

  <!-- Login Card -->
  <div class="card-glass p-10 w-full max-w-md shadow-web3 card-entrance relative z-10" id="login-card">
    <!-- Card header decoration -->
    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"></div>
    
    <h2 class="text-3xl font-display font-bold text-white mb-2 text-center bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
      Login to Kerala BLMS
    </h2>
    
    <p class="text-slate-400 text-center mb-8 text-sm">
      Welcome back! Please enter your credentials
    </p>

    <form method="post" autocomplete="off" novalidate id="login-form">
      {% csrf_token %}
      
      <!-- Messages -->
      {% if messages %}
      <div class="mb-6 space-y-2">
        {% for message in messages %}
        <div class="bg-red-500 bg-opacity-10 border border-red-500 rounded-lg p-3 transition-all duration-300 hover:bg-opacity-20">
          <p class="text-sm text-red-300 flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
            {{ message }}
          </p>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Email Input -->
      <div class="mb-6 relative group">
        <label for="email" class="block text-slate-300 mb-2 font-semibold flex items-center gap-2 transition-colors duration-300 group-focus-within:text-blue-400">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
          </svg>
          Email Address
        </label>
        <div class="relative">
          <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="you@example.com" 
            required
            class="w-full px-4 py-3 pl-10 rounded-lg bg-slate-800 text-slate-100 border border-slate-700 focus-web3 transition-all duration-300 hover:border-slate-600" 
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
        <div class="absolute inset-0 -z-10 bg-gradient-to-r from-blue-500 to-purple-500 opacity-0 blur-xl transition-opacity duration-300 group-focus-within:opacity-20 rounded-lg"></div>
      </div>

      <!-- Password Input -->
      <div class="mb-6 relative group">
        <label for="password" class="block text-slate-300 mb-2 font-semibold flex items-center gap-2 transition-colors duration-300 group-focus-within:text-purple-400">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
          </svg>
          Password
        </label>
        <div class="relative">
          <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
            required
            class="w-full px-4 py-3 pl-10 rounded-lg bg-slate-800 text-slate-100 border border-slate-700 focus-web3 transition-all duration-300 hover:border-slate-600" 
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
        <div class="absolute inset-0 -z-10 bg-gradient-to-r from-purple-500 to-pink-500 opacity-0 blur-xl transition-opacity duration-300 group-focus-within:opacity-20 rounded-lg"></div>
      </div>

      <!-- Remember Me & Forgot Password -->
      <div class="flex items-center justify-between mb-6">
        <label class="flex items-center gap-2 cursor-pointer group">
          <input type="checkbox" class="w-4 h-4 rounded border-slate-700 bg-slate-800 text-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 transition-all duration-300" />
          <span class="text-sm text-slate-400 group-hover:text-slate-300 transition-colors duration-300">Remember me</span>
        </label>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="shimmer-button text-gray-800 hover:bg-gray-100 font-semibold py-3 px-4 rounded-lg shadow-lg w-full text-lg mb-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl relative overflow-hidden group">
        <span class="relative z-10 flex items-center justify-center gap-2">
          <svg class="w-5 h-5 transition-transform duration-300 group-hover:translate-x-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"/>
          </svg>
          Login
        </span>
        <div class="absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
      </button>

      <!-- Divider -->
      <div class="relative mb-4">
        <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-slate-700"></div>
        </div>
        <div class="relative flex justify-center text-sm">
          <span class="px-2 bg-slate-800 text-slate-400">or</span>
        </div>
      </div>

      <!-- Register Link -->
      <p class="text-center text-slate-400 transition-all duration-300">
        Don't have an account?
        <a href="/register" class="text-accent-400 hover:text-accent-300 hover:underline font-semibold transition-all duration-300 inline-flex items-center gap-1 group">
          Register here
          <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
        </a>
      </p>
    </form>

    <!-- Card footer decoration -->
    <div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"></div>
  </div>

  <!-- Floating particles decoration -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute w-2 h-2 bg-blue-400 rounded-full opacity-50 animate-ping" style="top: 20%; left: 10%; animation-delay: 0s;"></div>
    <div class="absolute w-2 h-2 bg-purple-400 rounded-full opacity-50 animate-ping" style="top: 60%; right: 15%; animation-delay: 1s;"></div>
    <div class="absolute w-2 h-2 bg-pink-400 rounded-full opacity-50 animate-ping" style="bottom: 30%; left: 20%; animation-delay: 2s;"></div>
    <div class="absolute w-2 h-2 bg-blue-400 rounded-full opacity-50 animate-ping" style="top: 40%; right: 25%; animation-delay: 1.5s;"></div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Get all necessary DOM elements
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginCard = document.getElementById('login-card');
    const friendsContainer = document.getElementById('friends-container');
    
    // Friend 1 elements
    const friend1 = document.getElementById('friend1');
    const friend1Eyes = document.getElementById('friend1-eyes');
    const friend1PupilLeft = document.getElementById('friend1-pupil-left');
    const friend1PupilRight = document.getElementById('friend1-pupil-right');
    const friend1Eyelids = friend1.querySelectorAll('.eyelid');
    const friend1Mouth = friend1.querySelector('.character-mouth');
    const friend1Blushes = friend1.querySelectorAll('.character-blush');
    
    // Friend 2 elements
    const friend2 = document.getElementById('friend2');
    const friend2Eyes = document.getElementById('friend2-eyes');
    const friend2PupilLeft = document.getElementById('friend2-pupil-left');
    const friend2PupilRight = document.getElementById('friend2-pupil-right');
    const friend2Eyelids = friend2.querySelectorAll('.eyelid');
    const friend2Mouth = friend2.querySelector('.character-mouth');
    const friend2Blushes = friend2.querySelectorAll('.character-blush');

    // All pupils for batch operations
    const allPupils = [friend1PupilLeft, friend1PupilRight, friend2PupilLeft, friend2PupilRight];
    const allEyelids = [...friend1Eyelids, ...friend2Eyelids];
    const allMouths = [friend1Mouth, friend2Mouth];
    const allBlushes = [...friend1Blushes, ...friend2Blushes];

    // Enhanced input focus effects
    const inputs = document.querySelectorAll('input[type="email"], input[type="password"]');
    
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.classList.add('input-focused');
        this.classList.add('ring-2', 'ring-accent-400');
      });
      
      input.addEventListener('blur', function() {
        this.classList.remove('input-focused');
        this.classList.remove('ring-2', 'ring-accent-400');
      });
    });

    // Email input interactions - characters look at the input
    emailInput.addEventListener('focus', () => {
      // Move pupils to look down at the email field
      allPupils.forEach(pupil => {
        pupil.style.transform = 'translate(-50%, -30%)';
        pupil.style.transition = 'transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
      });

      // Characters show interest - raise eyebrows effect
      friend1Eyes.style.transform = 'translateX(-50%) translateY(-2px)';
      friend2Eyes.style.transform = 'translateX(-50%) translateY(-2px)';

      // Slight lean forward
      friend1.style.transform = 'translateY(5px) scale(1.02)';
      friend2.style.transform = 'translateY(5px) scale(1.02)';

      // Show smiles
      allMouths.forEach(mouth => {
        mouth.classList.add('smile');
      });
    });

    emailInput.addEventListener('blur', () => {
      // Reset pupil position
      allPupils.forEach(pupil => {
        pupil.style.transform = 'translate(-50%, -50%)';
      });

      // Reset eye position
      friend1Eyes.style.transform = 'translateX(-50%)';
      friend2Eyes.style.transform = 'translateX(-50%)';

      // Reset character position
      friend1.style.transform = 'translateY(0) scale(1)';
      friend2.style.transform = 'translateY(0) scale(1)';

      // Remove smiles
      allMouths.forEach(mouth => {
        mouth.classList.remove('smile');
      });
    });

    // Email input typing - pupils follow horizontally
    emailInput.addEventListener('input', () => {
      const inputLength = emailInput.value.length;
      const offset = Math.min(inputLength * 2, 30);
      
      allPupils.forEach((pupil, index) => {
        if (index % 2 === 0) {
          pupil.style.transform = `translate(calc(-50% + ${offset}px), -30%)`;
        } else {
          pupil.style.transform = `translate(calc(-50% + ${offset}px), -30%)`;
        }
      });
    });

    // Password input interactions - characters close eyes (shy/privacy)
    passwordInput.addEventListener('focus', () => {
      // Close eyes with smooth transition
      allEyelids.forEach(eyelid => {
        eyelid.style.height = '100%';
        eyelid.style.transition = 'height 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
      });

      // Show blush (embarrassed/shy)
      allBlushes.forEach(blush => {
        blush.classList.add('show');
      });

      // Slight turn away (shy behavior)
      friend1.style.transform = 'rotate(-5deg) translateY(3px)';
      friend2.style.transform = 'rotate(5deg) translateY(3px)';

      // Change mouth to neutral/shy
      allMouths.forEach(mouth => {
        mouth.style.width = '20px';
        mouth.style.height = '8px';
        mouth.classList.remove('smile');
      });

      // Add wiggle animation to show nervousness
      friend1.classList.add('wiggle-animation');
      friend2.classList.add('wiggle-animation');
    });

    passwordInput.addEventListener('blur', () => {
      // Open eyes slowly
      allEyelids.forEach(eyelid => {
        eyelid.style.height = '0%';
      });

      // Hide blush
      allBlushes.forEach(blush => {
        blush.classList.remove('show');
      });

      // Reset rotation
      friend1.style.transform = 'rotate(0deg) translateY(0)';
      friend2.style.transform = 'rotate(0deg) translateY(0)';

      // Reset mouth
      allMouths.forEach(mouth => {
        mouth.style.width = '30px';
        mouth.style.height = '15px';
      });

      // Remove wiggle animation
      friend1.classList.remove('wiggle-animation');
      friend2.classList.remove('wiggle-animation');

      // Reset pupils
      allPupils.forEach(pupil => {
        pupil.style.transform = 'translate(-50%, -50%)';
      });
    });

    // Password input typing - eyes stay closed but pupils move behind lids
    passwordInput.addEventListener('input', () => {
      const inputLength = passwordInput.value.length;
      
      // Subtle head bobbing while typing password (nervous behavior)
      if (inputLength % 2 === 0) {
        friend1.style.transform = 'rotate(-5deg) translateY(5px)';
        friend2.style.transform = 'rotate(5deg) translateY(5px)';
      } else {
        friend1.style.transform = 'rotate(-5deg) translateY(3px)';
        friend2.style.transform = 'rotate(5deg) translateY(3px)';
      }
    });

    // Form submission - characters react with excitement
    const loginForm = document.getElementById('login-form');
    loginForm.addEventListener('submit', (e) => {
      // Show excitement before submission
      allEyelids.forEach(eyelid => {
        eyelid.style.height = '0%';
      });

      allPupils.forEach(pupil => {
        pupil.style.transform = 'translate(-50%, -50%) scale(1.3)';
      });

      allMouths.forEach(mouth => {
        mouth.classList.add('smile');
        mouth.style.width = '50px';
        mouth.style.height = '25px';
      });

      // Jump animation
      friend1.style.transform = 'translateY(-20px) scale(1.1)';
      friend2.style.transform = 'translateY(-20px) scale(1.1)';

      // Add bounce back
      setTimeout(() => {
        friend1.style.transform = 'translateY(0) scale(1)';
        friend2.style.transform = 'translateY(0) scale(1)';
      }, 300);
    });

    // Mouse movement tracking - characters follow cursor slightly
    document.addEventListener('mousemove', (e) => {
      const cardRect = loginCard.getBoundingClientRect();
      const cardCenterX = cardRect.left + cardRect.width / 2;
      const cardCenterY = cardRect.top + cardRect.height / 2;
      
      const deltaX = (e.clientX - cardCenterX) / 100;
      const deltaY = (e.clientY - cardCenterY) / 100;

      // Only track if not in password field
      if (document.activeElement !== passwordInput) {
        allPupils.forEach(pupil => {
          if (document.activeElement !== emailInput) {
            pupil.style.transform = `translate(calc(-50% + ${deltaX}px), calc(-50% + ${deltaY}px))`;
          }
        });
      }

      // Subtle parallax effect for friends
      friendsContainer.style.transform = `translate(calc(-50% + ${deltaX * 2}px), ${deltaY * 2}px)`;
    });

    // Keyboard activity - characters react to typing
    document.addEventListener('keydown', () => {
      if (document.activeElement === emailInput || document.activeElement === passwordInput) {
        // Slight bounce on keypress
        const activeField = document.activeElement;
        activeField.style.transform = 'scale(0.99)';
        setTimeout(() => {
          activeField.style.transform = 'scale(1)';
        }, 100);
      }
    });

    // Random blinking animation for more life-like behavior
    setInterval(() => {
      if (document.activeElement !== passwordInput) {
        allEyelids.forEach(eyelid => {
          eyelid.style.height = '100%';
          setTimeout(() => {
            eyelid.style.height = '0%';
          }, 150);
        });
      }
    }, 5000 + Math.random() * 3000);

    // Idle animation - characters look around when no interaction
    let idleTimeout;
    const resetIdleTimer = () => {
      clearTimeout(idleTimeout);
      idleTimeout = setTimeout(() => {
        if (document.activeElement.tagName !== 'INPUT') {
          // Look left
          allPupils.forEach(pupil => {
            pupil.style.transform = 'translate(-70%, -50%)';
          });
          
          setTimeout(() => {
            // Look right
            allPupils.forEach(pupil => {
              pupil.style.transform = 'translate(-30%, -50%)';
            });
            
            setTimeout(() => {
              // Back to center
              allPupils.forEach(pupil => {
                pupil.style.transform = 'translate(-50%, -50%)';
              });
            }, 1000);
          }, 1000);
        }
      }, 8000);
    };

    // Reset idle timer on any user interaction
    ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
      document.addEventListener(event, resetIdleTimer, true);
    });

    // Initialize idle timer
    resetIdleTimer();

    // Console easter egg
    console.log('%cðŸ‘‹ Hello from Kerala BLMS! ', 'background: #667eea; color: white; font-size: 16px; padding: 10px; border-radius: 5px;');
    console.log('%cOur friendly characters are here to make your login experience delightful! ðŸ˜Š', 'color: #a78bfa; font-size: 12px;');
  });
</script>
{% endblock %}
